# Zeabur 全栈部署指南

本指南将帮助您在 Zeabur 上部署智能 AI 病理科研教学平台的前端、后端和数据库。

## 1. 准备工作

### 1.1 GitHub 仓库
确保您的项目代码已上传到 GitHub 仓库，并且仓库包含以下文件和目录：
- `package.json`：项目配置和依赖
- `server/`：后端代码
- `components/`、`pages/`、`services/` 等：前端代码
- `vite.config.ts`：Vite 构建配置

### 1.2 环境变量
准备以下环境变量：
- 前端 API 地址：`VITE_API_BASE_URL`
- 数据库连接信息：`DB_HOST`、`DB_PORT`、`DB_USER`、`DB_PASSWORD`、`DB_NAME`

## 2. 部署步骤

### 2.1 创建 Zeabur 项目
1. 登录 Zeabur 控制台（https://console.zeabur.com/）
2. 点击「创建项目」，输入项目名称（如 "pathology-platform"）
3. 点击「创建」按钮

### 2.2 部署后端 API
1. 在项目页面中，点击「添加服务」
2. 选择「从 GitHub 部署」
3. 选择您的 GitHub 仓库
4. 选择分支（如 "main"）
5. 配置构建命令：`npm run build`
6. 配置启动命令：`npm run server`
7. 点击「部署」按钮

### 2.3 部署数据库
1. 在项目页面中，点击「添加服务」
2. 选择「数据库」
3. 选择数据库类型（如 "MySQL"）
4. 配置数据库名称（如 "pathology_platform"）
5. 点击「创建」按钮
6. 等待数据库创建完成，记录数据库连接信息

### 2.4 配置后端 API 环境变量
1. 在后端服务的详情页面中，点击「环境变量」
2. 添加以下环境变量：
   - `DB_HOST`：数据库主机地址
   - `DB_PORT`：数据库端口号
   - `DB_USER`：数据库用户名
   - `DB_PASSWORD`：数据库密码
   - `DB_NAME`：数据库名称
   - `PORT`：后端服务端口（如 "3007"）
3. 点击「保存」按钮

### 2.5 重启后端 API
1. 在后端服务的详情页面中，点击「重启」按钮
2. 等待服务重启完成
3. 查看服务日志，确保数据库连接成功

### 2.6 部署前端应用
1. 在项目页面中，点击「添加服务」
2. 选择「从 GitHub 部署」
3. 选择您的 GitHub 仓库
4. 选择分支（如 "main"）
5. 配置构建命令：`npm run build`
6. 配置启动命令：`npm run preview`
7. 点击「部署」按钮

### 2.7 配置前端环境变量
1. 在前端服务的详情页面中，点击「环境变量」
2. 添加以下环境变量：
   - `VITE_API_BASE_URL`：后端 API 地址（如 "https://your-backend-service.zeabur.app/api"）
3. 点击「保存」按钮

### 2.8 重启前端应用
1. 在前端服务的详情页面中，点击「重启」按钮
2. 等待服务重启完成

## 3. 配置域名

### 3.1 为前端应用配置域名
1. 在前端服务的详情页面中，点击「域名」
2. 选择一个自动生成的域名，或绑定您自己的域名
3. 记录前端应用的域名

### 3.2 为后端 API 配置域名
1. 在后端服务的详情页面中，点击「域名」
2. 选择一个自动生成的域名
3. 记录后端 API 的域名

## 4. 测试部署

### 4.1 测试后端 API
1. 在浏览器中访问后端 API 地址（如 "https://your-backend-service.zeabur.app/api/health"）
2. 确认返回健康检查信息

### 4.2 测试前端应用
1. 在浏览器中访问前端应用的域名
2. 测试登录功能
3. 测试其他功能

## 5. 常见问题及解决方案

### 5.1 数据库连接失败
- 检查数据库连接信息是否正确
- 检查数据库服务是否正在运行
- 检查数据库用户权限

### 5.2 CORS 错误
- 确保后端 API 的 CORS 配置包含前端应用的域名
- 检查前端 API 地址是否正确

### 5.3 构建失败
- 检查依赖是否正确安装
- 检查构建命令是否正确
- 查看构建日志，定位具体错误

### 5.4 启动失败
- 检查环境变量是否正确配置
- 查看启动日志，定位具体错误

## 6. 监控与维护

### 6.1 查看服务日志
- 在 Zeabur 控制台中，点击服务的「日志」标签页
- 查看实时日志，定位问题

### 6.2 定期备份数据库
- 在数据库服务的详情页面中，点击「备份」
- 配置自动备份策略

### 6.3 扩展服务资源
- 在服务的详情页面中，点击「资源」
- 根据需要调整 CPU 和内存配置

## 7. 总结

通过以上步骤，您应该已经成功在 Zeabur 上部署了智能 AI 病理科研教学平台的全栈应用。如果遇到任何问题，请参考常见问题及解决方案，或联系 Zeabur 技术支持。

---

**部署完成后，您可以通过配置的域名访问您的应用，开始使用智能 AI 病理科研教学平台的所有功能。**